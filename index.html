<html>
  <head>
    <script src='https://cdn.firebase.com/v0/firebase.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>
  </head>
  <body>
    
    <b>Enter your question here</b> <br/>
    <input type='text' id='caseid' placeholder='Case'>
    <input type='text' id='nameInput' placeholder='Name'>
    <input type='text' id='messageInput' placeholder='Message'>
    <button onclick="myFunction()">Ask here</button>
    <div id='messagesDiv'></div>
    
    <b>Assist someone here</b><br/>
    <input type='text' id='caseidA' placeholder='Case'>
    <input type='text' id='nameInputA' placeholder='Name'>
    <input type='text' id='messageInputA' placeholder='Message'>
    <button onclick="myFunction1()">Answer Here</button>
    <div id='ansDiv'></div>
    <script>
      var myDataRef = new Firebase('https://ycchua.firebaseio.com/');
      myDataRef.on('child_added', function(snapshot) {
        var message = snapshot.val();
        displayChatMessage(message.name, message.text, message.caseid);
      });
      function displayChatMessage(name, text, caseid) {
        $('#messagesDiv').append("<div id='div_" + caseid + "' />");
        var container = $("#div_" + caseid);
        
        container.append("Case : <label>" + caseid + "</label><br/>")
        $('<div style="display:inline"/>').text(text).prepend($('<em/>').text(name+': ')).appendTo(container);
         container.append("<button onclick='removeElem(this)'>Remove</button><br/>");
        $('#messagesDiv')[0].scrollTop = $('#messagesDiv')[0].scrollHeight;
      };
      
      function myFunction()
      {
          var caseid = $('#caseid').val();
          var name = $('#nameInput').val();
          var text = $("#messageInput").val();
          myDataRef.push({caseid: caseid, name: name, text: text});
         // $('#messageInput').val('');
      }

    function removeElem(elem) {
      $(elem).parent().remove();
      myDataRef.remove();
    }
      //Answers are here
      var myDataRef1 = new Firebase('https://ycchuahelper.firebaseio.com/');
      myDataRef1.on('child_added', function(snapshot) {
        var message1 = snapshot.val();
        displayChatMessage1(message1.nameA, message1.textA, message1.caseidA);
      });
      function displayChatMessage1(nameA, textA, caseidA) {
        $('#ansDiv').append("<div id='div_" + caseidA + "' />");
        var containerA = $("#div1" + caseidA);
        containerA.append("Case : <label>" + caseidA + "</label><br/>")
        $('<div style="display:inline"/>').text(textA).prepend($('<em/>').text(nameA+': ')).appendTo(containerA);
         containerA.append("<button onclick='removeElem1(this)'>Remove</button><br/>");
        $('#ansDiv')[0].scrollTop = $('#ansDiv')[0].scrollHeight;
      };
      
      function myFunction1()
      {
          var caseidA = $('#caseidA').val();
          var nameA = $('#nameInputA').val();
          var textA = $("#messageInputA").val();
          myDataRef1.push({caseidA: caseidA, nameA: nameA, textA: textA});
          $('#messageInput').val('');
      }
      
      function removeElem1(elem) {
      $(elem).parent().remove();
      myDataRef1.remove();
    }
    </script>

  </body>
</html>
